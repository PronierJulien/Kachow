services:
  mongo-database:
    image: mongo:6.0
    container_name: mongo-database
    environment:
      - MONGO_INITDB_ROOT_USERNAME=mongoadmin
      - MONGO_INITDB_ROOT_PASSWORD=password
    volumes:
      - mongo-database:/data/db
    expose:
      - 27017
    ports:
      - '27017:27017'
    restart: on-failure



  api-auth:
      build: ./api-auth
      container_name: api-auth
      ports: ['8080:8080']
      depends_on: ['mongo-database']

  api-invocations:
      build: ./api-invocations
      container_name: api-invocations
      ports: [ '8030:8080' ]
      depends_on: [ 'mongo-database', 'api-auth' ]

  api-joueur:
      build: ./api-joueur
      container_name: api-joueur
      ports: [ '8010:8080' ]
      depends_on: [ 'mongo-database', 'api-auth' ]

  api-monstres:
      build: ./api-monstres
      container_name: api-monstres
      ports: [ '8020:8080' ]
      depends_on: [ 'mongo-database', 'api-auth' ]

volumes:
  mongo-database: